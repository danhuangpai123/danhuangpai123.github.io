<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>防抖和节流的原理及应用场景</title>
      <link href="/2023/11/19/debounce/"/>
      <url>/2023/11/19/debounce/</url>
      
        <content type="html"><![CDATA[<h2 id="作用"><a href="#作用" class="headerlink" title="作用"></a>作用</h2><p><strong>防抖和节流</strong>是<code>JavaScript</code> 中常用的两种性能优化方式,它们的作用是减少函数的执行次数，以提高代码的性能</p><h2 id="一-防抖"><a href="#一-防抖" class="headerlink" title="一.防抖"></a>一.防抖</h2><p> 防抖是指在某个事件频繁触发时，延迟一定时间后再执行回调函数。如果在延迟时间内又触发了同样的事件，那么会重新计时。从而避免了频繁触发回调函数，只在事件停止触发后执行一次</p><h3 id="1-原理"><a href="#1-原理" class="headerlink" title="1.原理"></a>1.原理</h3><p> 每次触发事件前都取消之前的延时调用方法</p><h3 id="2-使用场景"><a href="#2-使用场景" class="headerlink" title="2.使用场景"></a>2.使用场景</h3><p>按钮提交,防止多次提交按钮,只执行最后一次的搜索框联想,防止联想发送请求,只发送最后一次的输入</p><h3 id="3-代码实现"><a href="#3-代码实现" class="headerlink" title="3.代码实现"></a>3.代码实现</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">debounce</span>(<span class="params">fn, delay = <span class="number">300</span></span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> time = <span class="literal">null</span>;</span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">_debounce</span>(<span class="params">...args</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (time !== <span class="literal">null</span>) &#123;</span><br><span class="line">      <span class="built_in">clearTimeout</span>(time);</span><br><span class="line">    &#125;</span><br><span class="line">    time = <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      fn.<span class="title function_">apply</span>(<span class="variable language_">this</span>, args);</span><br><span class="line">    &#125;, delay);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> _debounce;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动"></p><p><strong>fn</strong>: 实现防抖的函数</p><p><strong>delay</strong>: 延迟调用的事件,默认为300毫秒</p><h2 id="二-节流"><a href="#二-节流" class="headerlink" title="二.节流"></a>二.节流</h2><p>节流是指在某个事件持续触发时，限制一定时间间隔只执行一次回调函数。比如，设置每1000毫秒最多执行一次回调函数，不论事件触发的频率有多高</p><h3 id="1-原理-1"><a href="#1-原理-1" class="headerlink" title="1.原理"></a>1.原理</h3><p>每次触发事件的时候,判断当前是否存在等待执行的延时函数</p><h3 id="2-使用场景-1"><a href="#2-使用场景-1" class="headerlink" title="2.使用场景"></a>2.使用场景</h3><p>拖拽场景: 固定时间内只执行一次,防止超高频次触发位置变动</p><p>缩放场景: 监控浏览器resize</p><h3 id="3-代码实现-1"><a href="#3-代码实现-1" class="headerlink" title="3.代码实现"></a>3.代码实现</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">throttle</span>(<span class="params">fun, delay = <span class="number">1000</span></span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> flag = <span class="literal">true</span></span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">function</span> (<span class="params">...args</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (!flag) <span class="keyword">return</span>;</span><br><span class="line">    flag = <span class="literal">false</span></span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      fun.<span class="title function_">apply</span>(<span class="variable language_">this</span>, args)</span><br><span class="line">      flag = <span class="literal">true</span></span><br><span class="line">    &#125;, delay)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动"></p><p><strong>fun</strong>: 实现防抖的函数</p><p><strong>delay</strong>: 延迟调用的事件,默认为1000毫秒</p><h2 id="总结"><a href="#总结" class="headerlink" title="总结:"></a>总结:</h2><p>防抖：在规定时间内，多次触发只响应最后一次。（多次触发，只执行最后一次）<br>节流：在规定时间内，多次触发只响应第一次。（规定时间内，只触发一次） </p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>base64转file文件的两种方式</title>
      <link href="/2023/11/12/base64/"/>
      <url>/2023/11/12/base64/</url>
      
        <content type="html"><![CDATA[<h3 id="base64加载图片文件"><a href="#base64加载图片文件" class="headerlink" title="base64加载图片文件"></a>base64加载图片文件</h3><p>​    使用base64可以不发送请求将图片文件转换为base64格式的链接渲染到图片上,减少服务器访问次数,下面是base64加载图片的方式</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;front-file&quot;</span>).<span class="property">onchange</span> = <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> file = e.<span class="property">target</span>.<span class="property">files</span>[<span class="number">0</span>];</span><br><span class="line">  <span class="keyword">const</span> reader = <span class="keyword">new</span> <span class="title class_">FileReader</span>();</span><br><span class="line">  reader.<span class="property">onload</span> = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> imgURL = reader.<span class="property">result</span>;</span><br><span class="line">    <span class="keyword">const</span> img = <span class="keyword">new</span> <span class="title class_">Image</span>();</span><br><span class="line">    img.<span class="property">src</span> = imgURL;</span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;front-pic&quot;</span>).<span class="title function_">setAttribute</span>(<span class="string">&quot;src&quot;</span>, imgURL);</span><br><span class="line">  &#125;;</span><br><span class="line">  reader.<span class="title function_">readAsDataURL</span>(file);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动"></p><h3 id="base64转file文件"><a href="#base64转file文件" class="headerlink" title="base64转file文件"></a>base64转file文件</h3><p>项目中需要实现把图片的base64编码转成file文件的功能，然后再上传至服务器。</p><p>有两种方法:</p><h4 id="1-直接通过new-File-的方式进行转换"><a href="#1-直接通过new-File-的方式进行转换" class="headerlink" title="1.直接通过new File()的方式进行转换"></a>1.直接通过new File()的方式进行转换</h4><p>(注:new File()方法不兼容ios系统)</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//将base64转换为文件</span></span><br><span class="line"><span class="title function_">dataURLtoFile</span>(<span class="params">dataurl, filename</span>) &#123; </span><br><span class="line">    <span class="keyword">var</span> arr = dataurl.<span class="title function_">split</span>(<span class="string">&#x27;,&#x27;</span>),</span><br><span class="line">    mime = arr[<span class="number">0</span>].<span class="title function_">match</span>(<span class="regexp">/:(.*?);/</span>)[<span class="number">1</span>],</span><br><span class="line">    bstr = <span class="title function_">atob</span>(arr[<span class="number">1</span>]),</span><br><span class="line">    n = bstr.<span class="property">length</span>,</span><br><span class="line">    u8arr = <span class="keyword">new</span> <span class="title class_">Uint8Array</span>(n);</span><br><span class="line">    <span class="keyword">while</span> (n--) &#123;</span><br><span class="line">        u8arr[n] = bstr.<span class="title function_">charCodeAt</span>(n);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">File</span>([u8arr], filename, &#123; <span class="attr">type</span>: mime &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//调用</span></span><br><span class="line"><span class="keyword">var</span> file = <span class="title function_">dataURLtoFile</span>(base64Data, imgName);</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动"></p><h4 id="2-将base64转成blob-——-blob转成file"><a href="#2-将base64转成blob-——-blob转成file" class="headerlink" title="2.将base64转成blob ——&gt; blob转成file"></a>2.将base64转成blob ——&gt; blob转成file</h4><p>(注:此方法不存在浏览器兼容问题)</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//将base64转换为blob</span></span><br><span class="line"><span class="title function_">dataURLtoBlob</span>(<span class="params">dataurl</span>) &#123; </span><br><span class="line">    <span class="keyword">var</span> arr = dataurl.<span class="title function_">split</span>(<span class="string">&#x27;,&#x27;</span>),</span><br><span class="line">    mime = arr[<span class="number">0</span>].<span class="title function_">match</span>(<span class="regexp">/:(.*?);/</span>)[<span class="number">1</span>],</span><br><span class="line">    bstr = <span class="title function_">atob</span>(arr[<span class="number">1</span>]),</span><br><span class="line">    n = bstr.<span class="property">length</span>,</span><br><span class="line">    u8arr = <span class="keyword">new</span> <span class="title class_">Uint8Array</span>(n);</span><br><span class="line">    <span class="keyword">while</span> (n--) &#123;</span><br><span class="line">        u8arr[n] = bstr.<span class="title function_">charCodeAt</span>(n);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Blob</span>([u8arr], &#123; <span class="attr">type</span>: mime &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//将blob转换为file</span></span><br><span class="line"><span class="title function_">blobToFile</span>(<span class="params">theBlob, fileName</span>)&#123;</span><br><span class="line">   theBlob.<span class="property">lastModifiedDate</span> = <span class="keyword">new</span> <span class="title class_">Date</span>();</span><br><span class="line">   theBlob.<span class="property">name</span> = fileName;</span><br><span class="line">   <span class="keyword">return</span> theBlob;</span><br><span class="line">&#125;,</span><br><span class="line"><span class="comment">//调用</span></span><br><span class="line"><span class="keyword">var</span> blob = <span class="title function_">dataURLtoBlob</span>(base64Data);</span><br><span class="line"><span class="keyword">var</span> file = <span class="title function_">blobToFile</span>(blob, imgName);</span><br></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动"></p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>JS防唯品会放大镜效果</title>
      <link href="/2023/10/22/glass/"/>
      <url>/2023/10/22/glass/</url>
      
        <content type="html"><![CDATA[<h3 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h3><p>先说一个选择器封装函数:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">$1</span>(<span class="params">selector, parent</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (selector.<span class="title function_">charAt</span>(<span class="number">0</span>) == <span class="string">&quot;#&quot;</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(selector.<span class="title function_">substring</span>(<span class="number">1</span>));</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (selector.<span class="title function_">charAt</span>(<span class="number">0</span>) == <span class="string">&quot;.&quot;</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">document</span>.<span class="title function_">getElementsByClassName</span>(selector.<span class="title function_">substring</span>(<span class="number">1</span>));</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    parent = parent || <span class="variable language_">document</span>;</span><br><span class="line">    <span class="keyword">return</span> parent.<span class="title function_">getElementsByTagName</span>(selector);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动"></p><p>使用方法:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> item = $1(<span class="string">&quot;.item&quot;</span>)[<span class="number">0</span>];</span><br><span class="line"><span class="keyword">const</span> screen = $1(<span class="string">&quot;#screen&quot;</span>);</span><br></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动"></p><h3 id="整体思想"><a href="#整体思想" class="headerlink" title="整体思想"></a>整体思想</h3><ul><li>鼠标移到外部大盒子上让装大图的盒子显示出来，小盒子的样式改变</li><li>鼠标在装大图盒子上移动时实现放大效果<ul><li>获取鼠标在屏幕上的位置（pageX和pageY）</li><li>获取放大镜在屏幕上的位置（让鼠标在发大镜的中间位置所以要减去放大镜宽度的一半）</li><li>让发大镜在固定的位置内移动（装大图盒子的内部）</li><li>将放大镜的移动距离赋值给发大镜的top和left值</li><li>确定放大镜的移动距离和放大图片的移动距离的关系实现放大效果<ul><li>screen的移动距离&#x2F;screen的最大移动距离 &#x3D; 背景图的移动距离&#x2F;背景图的最大移动距离</li></ul></li></ul></li><li>在点击tab栏时让每一个背景都可以放大，将当前tab的index值当做参数传给magnifier函数，要让刚开始打开页面时的盒子有放大效果，要给magnifier函数传入参数0，在外部调用</li><li>鼠标离开外部大盒子时让装大图的盒子隐藏</li></ul><h3 id="HTML"><a href="#HTML" class="headerlink" title="HTML:"></a>HTML:</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;view&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;big&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;big-item&quot;</span> <span class="attr">style</span>=<span class="string">&quot;display: block;&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;bigLess&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot; &quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;bigMore&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot; &quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span> <span class="attr">class</span>=<span class="string">&quot;bigMoreImg&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;screen&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;big-item&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;bigLess&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot; &quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;bigMore&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot; &quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span> <span class="attr">class</span>=<span class="string">&quot;bigMoreImg&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;screen&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;big-item&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;bigLess&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot; &quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;bigMore&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot; &quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span> <span class="attr">class</span>=<span class="string">&quot;bigMoreImg&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;screen&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;big-item&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;bigLess&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot; &quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;bigMore&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot; &quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span> <span class="attr">class</span>=<span class="string">&quot;bigMoreImg&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;screen&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;big-item&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;bigLess&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot; &quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;bigMore&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot; &quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span> <span class="attr">class</span>=<span class="string">&quot;bigMoreImg&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;screen&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;small&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;hid&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;small-item&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot; &quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;small-item&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot; &quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;small-item&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot; &quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;small-item&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot; &quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;small-item&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot; &quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动"></p><h3 id="CSS"><a href="#CSS" class="headerlink" title="CSS:"></a>CSS:</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br></pre></td><td class="code"><pre><span class="line">* &#123;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.view</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">420px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.view</span> <span class="selector-class">.big</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">420px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">420px</span>;</span><br><span class="line">  <span class="attribute">margin-bottom</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.view</span> <span class="selector-class">.big-item</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">display</span>: none;</span><br><span class="line">  <span class="attribute">cursor</span>: crosshair;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.view</span> <span class="selector-class">.big-item</span> <span class="selector-class">.bigLess</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">420px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">420px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.view</span> <span class="selector-class">.big-item</span> <span class="selector-class">.bigLess</span> <span class="selector-tag">img</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">12px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.view</span> <span class="selector-class">.big-item</span> <span class="selector-class">.screen</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100px</span>;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">12px</span>;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.view</span> <span class="selector-class">.big-item</span> <span class="selector-class">.bigMore</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">420px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">420px</span>;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">display</span>: none;</span><br><span class="line">  <span class="attribute">overflow</span>: hidden;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">12px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.view</span> <span class="selector-class">.big-item</span> <span class="selector-class">.bigMore</span> <span class="selector-class">.bigMoreImg</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">200%</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">200%</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.small</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">420px</span>;</span><br><span class="line">  <span class="attribute">overflow</span>: hidden;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">justify-content</span>: center;</span><br><span class="line">  <span class="attribute">align-items</span>: center;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.small</span> <span class="selector-class">.small-item</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">62px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">62px</span>;</span><br><span class="line">  <span class="attribute">margin-right</span>: <span class="number">7px</span>;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#eee</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">6px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.small</span> <span class="selector-class">.small-item</span> <span class="selector-tag">img</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">overflow</span>: hidden;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">6px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.small</span> <span class="selector-class">.small-item</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#f8305b</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.hid</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">353px</span>;</span><br><span class="line">  <span class="attribute">overflow</span>: hidden;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动"></p><p>JS:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> bigBox = $1(<span class="string">&quot;.big&quot;</span>)[<span class="number">0</span>];</span><br><span class="line"><span class="keyword">var</span> smallItem = $1(<span class="string">&quot;.small-item&quot;</span>);</span><br><span class="line"><span class="keyword">var</span> bigItem = $1(<span class="string">&quot;.big-item&quot;</span>);</span><br><span class="line"><span class="keyword">var</span> bigMore = $1(<span class="string">&quot;.bigMore&quot;</span>);</span><br><span class="line"><span class="keyword">var</span> screen = $1(<span class="string">&quot;.screen&quot;</span>);</span><br><span class="line"><span class="keyword">var</span> pic = $1(<span class="string">&quot;.bigMoreImg&quot;</span>);</span><br><span class="line"><span class="comment">// 底部tab栏切换</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; smallItem.<span class="property">length</span>; i++) &#123;</span><br><span class="line">  smallItem[i].<span class="property">index</span> = i;</span><br><span class="line">  smallItem[i].<span class="property">onmouseover</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">style</span>.<span class="property">borderColor</span> = <span class="string">&quot;#f10180&quot;</span>;</span><br><span class="line">  &#125;;</span><br><span class="line">  smallItem[i].<span class="property">onmouseout</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">style</span>.<span class="property">borderColor</span> = <span class="string">&quot;#eee&quot;</span>;</span><br><span class="line">  &#125;;</span><br><span class="line">  smallItem[i].<span class="property">onclick</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> index = <span class="variable language_">this</span>.<span class="property">index</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; smallItem.<span class="property">length</span>; i++) &#123;</span><br><span class="line">      bigItem[i].<span class="property">style</span>.<span class="property">display</span> = <span class="string">&quot;none&quot;</span>;</span><br><span class="line">      smallItem[i].<span class="property">style</span>.<span class="property">borderColor</span> = <span class="string">&quot;#eee&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    bigItem[<span class="variable language_">this</span>.<span class="property">index</span>].<span class="property">style</span>.<span class="property">display</span> = <span class="string">&quot;block&quot;</span>;</span><br><span class="line">    smallItem[<span class="variable language_">this</span>.<span class="property">index</span>].<span class="property">style</span>.<span class="property">borderColor</span> = <span class="string">&quot;#f10180&quot;</span>;</span><br><span class="line">    <span class="title function_">magnifier</span>(index);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 放大镜效果</span></span><br><span class="line"><span class="title function_">magnifier</span>(<span class="number">0</span>);</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">magnifier</span>(<span class="params">index</span>) &#123;</span><br><span class="line">  bigBox.<span class="property">onmouseover</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    bigMore[index].<span class="property">style</span>.<span class="property">display</span> = <span class="string">&quot;block&quot;</span>;</span><br><span class="line">    smallItem[index].<span class="property">style</span>.<span class="property">borderColor</span> = <span class="string">&quot;#eee&quot;</span>;</span><br><span class="line">  &#125;;</span><br><span class="line">  bigMore[index].<span class="property">onmousemove</span> = <span class="keyword">function</span> (<span class="params">e</span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> e = event || <span class="variable language_">window</span>.<span class="property">event</span>;</span><br><span class="line">    <span class="comment">// 获取鼠标的位置</span></span><br><span class="line">    <span class="keyword">var</span> X = e.<span class="property">pageX</span> || e.<span class="property">clientX</span> + <span class="variable language_">document</span>.<span class="property">documentElement</span>.<span class="property">scrollLeft</span>;</span><br><span class="line">    <span class="keyword">var</span> Y = e.<span class="property">pageY</span> || e.<span class="property">clientY</span> + <span class="variable language_">document</span>.<span class="property">documentElement</span>.<span class="property">scrollTop</span>;</span><br><span class="line">    <span class="comment">// 获取screen的位置</span></span><br><span class="line">    <span class="keyword">var</span> screenX = X - bigBox.<span class="property">offsetLeft</span> - screen[index].<span class="property">offsetWidth</span> / <span class="number">2</span>;</span><br><span class="line">    <span class="keyword">var</span> screenY = Y - bigBox.<span class="property">offsetTop</span> - screen[index].<span class="property">offsetHeight</span> / <span class="number">2</span>;</span><br><span class="line">    <span class="comment">// 确定screen的移动范围</span></span><br><span class="line">    screenX = screenX &lt; <span class="number">0</span> ? <span class="number">0</span> : screenX;</span><br><span class="line">    screenY = screenY &lt; <span class="number">0</span> ? <span class="number">0</span> : screenY;</span><br><span class="line">    <span class="keyword">var</span> screenXMax = bigBox.<span class="property">offsetWidth</span> - screen[index].<span class="property">offsetWidth</span>;</span><br><span class="line">    <span class="keyword">var</span> screenYMax = bigBox.<span class="property">offsetHeight</span> - screen[index].<span class="property">offsetHeight</span>;</span><br><span class="line">    screenX = screenX &gt; screenXMax ? screenXMax : screenX;</span><br><span class="line">    screenY = screenY &gt; screenYMax ? screenYMax : screenY;</span><br><span class="line">    <span class="comment">//确定移动距离</span></span><br><span class="line">    screen[index].<span class="property">style</span>.<span class="property">left</span> = screenX + <span class="string">&quot;px&quot;</span>;</span><br><span class="line">    screen[index].<span class="property">style</span>.<span class="property">top</span> = screenY + <span class="string">&quot;px&quot;</span>;</span><br><span class="line">    <span class="comment">//确定背景图片的移动距离</span></span><br><span class="line">    <span class="comment">// screen的移动距离/screen的最大移动距离 = 背景图的移动距离/背景图的最大移动距离</span></span><br><span class="line">    <span class="keyword">var</span> picXMax = pic[index].<span class="property">offsetWidth</span> - bigBox.<span class="property">offsetWidth</span>;</span><br><span class="line">    <span class="keyword">var</span> picYMax = pic[index].<span class="property">offsetHeight</span> - bigBox.<span class="property">offsetHeight</span>;</span><br><span class="line">    pic[index].<span class="property">style</span>.<span class="property">top</span> = (-screenY / screenYMax) * picYMax + <span class="string">&quot;px&quot;</span>;</span><br><span class="line">    pic[index].<span class="property">style</span>.<span class="property">left</span> = (-screenX / screenXMax) * picXMax + <span class="string">&quot;px&quot;</span>;</span><br><span class="line">  &#125;;</span><br><span class="line">  bigBox.<span class="property">onmouseout</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    bigMore[index].<span class="property">style</span>.<span class="property">display</span> = <span class="string">&quot;none&quot;</span>;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//获取ID名和tagName</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">$1</span>(<span class="params">selector, parent</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (selector.<span class="title function_">charAt</span>(<span class="number">0</span>) == <span class="string">&quot;#&quot;</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(selector.<span class="title function_">substring</span>(<span class="number">1</span>));</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (selector.<span class="title function_">charAt</span>(<span class="number">0</span>) == <span class="string">&quot;.&quot;</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">document</span>.<span class="title function_">getElementsByClassName</span>(selector.<span class="title function_">substring</span>(<span class="number">1</span>));</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    parent = parent || <span class="variable language_">document</span>;</span><br><span class="line">    <span class="keyword">return</span> parent.<span class="title function_">getElementsByTagName</span>(selector);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动"></p><h3 id="效果图"><a href="#效果图" class="headerlink" title="效果图:"></a>效果图:</h3><p><img src="/images/glass.png" alt="图片"></p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>使用canvas完成图形验证码发送评论</title>
      <link href="/2023/10/08/code/"/>
      <url>/2023/10/08/code/</url>
      
        <content type="html"><![CDATA[<p> 将二十六个英文字母的大小写和数字0-9定义为一个字符串数组,通过for循环获取随机索引值,将索引值对应的字符使用canvas完成渲染</p><h4 id="html"><a href="#html" class="headerlink" title="html:"></a>html:</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>高国红名师工作室<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">type</span>=<span class="string">&quot;text/css&quot;</span> <span class="attr">href</span>=<span class="string">&quot;../css/code.css&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;comment&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h2</span> <span class="attr">class</span>=<span class="string">&quot;cmtit&quot;</span>&gt;</span>留言<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">textarea</span> <span class="attr">id</span>=<span class="string">&quot;com-txt&quot;</span> <span class="attr">onkeyup</span>=<span class="string">&quot;countContent(this)&quot;</span> <span class="attr">maxlength</span>=<span class="string">&quot;200&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">textarea</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">&quot;com_num&quot;</span>&gt;</span>您还可以输入200字<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;code&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">value</span>=<span class="string">&quot;&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;请输入验证码&quot;</span> <span class="attr">class</span>=<span class="string">&quot;input-val&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">canvas</span> <span class="attr">id</span>=<span class="string">&quot;canvas&quot;</span> <span class="attr">width</span>=<span class="string">&quot;100&quot;</span> <span class="attr">height</span>=<span class="string">&quot;30&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">&quot;btn&quot;</span>&gt;</span>提交<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;http://www.lanrenzhijia.com/ajaxjs/jquery.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.bootcdn.net/ajax/libs/axios/0.27.2/axios.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;../static/js/code.js&quot;</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动"></p><h4 id="css"><a href="#css" class="headerlink" title="css:"></a>css:</h4><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line">* &#123;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">button</span> &#123;</span><br><span class="line">  <span class="attribute">border</span>: none;</span><br><span class="line">  <span class="attribute">outline</span>: none;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.comment</span> &#123;</span><br><span class="line">  <span class="attribute">margin-bottom</span>: <span class="number">20px</span>;</span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.comment</span> <span class="selector-class">.cmtit</span> &#123;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">18px</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#333</span>;</span><br><span class="line">  <span class="attribute">line-height</span>: <span class="number">18px</span>;</span><br><span class="line">  <span class="attribute">font-weight</span>: bold;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">30px</span> <span class="number">0</span> <span class="number">20px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.comment</span> <span class="selector-id">#com-txt</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">648px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">112px</span>;</span><br><span class="line">  <span class="attribute">resize</span>: none;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">12px</span>;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#b1a792</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">4px</span>;</span><br><span class="line">  <span class="attribute">outline</span>: none;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">14px</span>;</span><br><span class="line">  <span class="attribute">font-family</span>: inherit;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.comment</span> <span class="selector-id">#com_num</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#464040</span>;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">13px</span>;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">150px</span>;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">540px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.comment</span> <span class="selector-class">.code</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: -webkit-flex;</span><br><span class="line">  <span class="attribute">display</span>: -moz-box;</span><br><span class="line">  <span class="attribute">display</span>: -ms-flexbox;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">margin-top</span>: <span class="number">15px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.comment</span> <span class="selector-class">.code</span> <span class="selector-class">.input-val</span> &#123;</span><br><span class="line">  <span class="attribute">outline</span>: none;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">30px</span>;</span><br><span class="line">  <span class="attribute">padding-left</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#b1a792</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.comment</span> <span class="selector-class">.code</span> <span class="selector-class">.btn</span> &#123;</span><br><span class="line">  <span class="attribute">float</span>: right;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">16px</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#ffffff</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">78px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">33px</span>;</span><br><span class="line">  <span class="attribute">line-height</span>: <span class="number">33px</span>;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#278491</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">2px</span>;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.comment</span> <span class="selector-class">.code</span> <span class="selector-id">#canvas</span> &#123;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0px</span> <span class="number">10px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动"></p><h4 id="js"><a href="#js" class="headerlink" title="js:"></a>js:</h4><p>​    <strong>生成并渲染出验证码图形</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">draw</span>(<span class="params">show_num</span>) &#123;</span><br><span class="line">  <span class="keyword">var</span> canvas_width = $(<span class="string">&quot;#canvas&quot;</span>).<span class="title function_">width</span>();</span><br><span class="line">  <span class="keyword">var</span> canvas_height = $(<span class="string">&quot;#canvas&quot;</span>).<span class="title function_">height</span>();</span><br><span class="line">  <span class="keyword">var</span> canvas = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;canvas&quot;</span>); <span class="comment">//获取到canvas的对象</span></span><br><span class="line">  <span class="keyword">var</span> context = canvas.<span class="title function_">getContext</span>(<span class="string">&quot;2d&quot;</span>); <span class="comment">//获取到canvas画图的环境</span></span><br><span class="line">  canvas.<span class="property">width</span> = canvas_width;</span><br><span class="line">  canvas.<span class="property">height</span> = canvas_height;</span><br><span class="line">  <span class="keyword">var</span> sCode =</span><br><span class="line">    <span class="string">&quot;a,b,c,d,e,f,g,h,i,j,k,m,n,p,q,r,s,t,u,v,w,x,y,z,A,B,C,E,F,G,H,J,K,L,M,N,P,Q,R,S,T,W,X,Y,Z,1,2,3,4,5,6,7,8,9,0&quot;</span>;</span><br><span class="line">  <span class="keyword">var</span> aCode = sCode.<span class="title function_">split</span>(<span class="string">&quot;,&quot;</span>); <span class="comment">//把字符串分割成字符串数组。</span></span><br><span class="line">  <span class="keyword">var</span> aLength = aCode.<span class="property">length</span>; <span class="comment">//获取到数组的长度</span></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">4</span>; i++) &#123;</span><br><span class="line">    <span class="comment">//这里的for循环可以控制验证码位数（如果想显示6位数，4改成6即可）</span></span><br><span class="line">    <span class="keyword">var</span> j = <span class="title class_">Math</span>.<span class="title function_">floor</span>(<span class="title class_">Math</span>.<span class="title function_">random</span>() * aLength); <span class="comment">//获取到随机的索引值,random() 方法可返回介于 0（包含） ~ 1（不包含） 之间的一个随机数。</span></span><br><span class="line">    <span class="comment">// var deg = Math.random() * 30 * Math.PI / 180;//产生0~30之间的随机弧度</span></span><br><span class="line">    <span class="keyword">var</span> deg = <span class="title class_">Math</span>.<span class="title function_">random</span>() - <span class="number">0.5</span>; <span class="comment">//产生一个随机弧度</span></span><br><span class="line">    <span class="keyword">var</span> txt = aCode[j]; <span class="comment">//得到随机的一个内容</span></span><br><span class="line">    show_num[i] = txt.<span class="title function_">toLowerCase</span>();</span><br><span class="line">    <span class="keyword">var</span> x = <span class="number">10</span> + i * <span class="number">20</span>; <span class="comment">//文字在canvas上的x坐标</span></span><br><span class="line">    <span class="keyword">var</span> y = <span class="number">20</span> + <span class="title class_">Math</span>.<span class="title function_">random</span>() * <span class="number">8</span>; <span class="comment">//文字在canvas上的y坐标</span></span><br><span class="line">    context.<span class="property">font</span> = <span class="string">&quot;bold 23px 微软雅黑&quot;</span>;</span><br><span class="line">    context.<span class="title function_">translate</span>(x, y);</span><br><span class="line">    context.<span class="title function_">rotate</span>(deg);</span><br><span class="line">    context.<span class="property">fillStyle</span> = <span class="title function_">randomColor</span>();</span><br><span class="line">    context.<span class="title function_">fillText</span>(txt, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">    context.<span class="title function_">rotate</span>(-deg);</span><br><span class="line">    context.<span class="title function_">translate</span>(-x, -y);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt;= <span class="number">5</span>; i++) &#123;</span><br><span class="line">    <span class="comment">//验证码上显示线条</span></span><br><span class="line">    context.<span class="property">strokeStyle</span> = <span class="title function_">randomColor</span>();</span><br><span class="line">    context.<span class="title function_">beginPath</span>();</span><br><span class="line">    context.<span class="title function_">moveTo</span>(<span class="title class_">Math</span>.<span class="title function_">random</span>() * canvas_width, <span class="title class_">Math</span>.<span class="title function_">random</span>() * canvas_height);</span><br><span class="line">    context.<span class="title function_">lineTo</span>(<span class="title class_">Math</span>.<span class="title function_">random</span>() * canvas_width, <span class="title class_">Math</span>.<span class="title function_">random</span>() * canvas_height);</span><br><span class="line">    context.<span class="title function_">stroke</span>();</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt;= <span class="number">30</span>; i++) &#123;</span><br><span class="line">    <span class="comment">//验证码上显示小点</span></span><br><span class="line">    context.<span class="property">strokeStyle</span> = <span class="title function_">randomColor</span>();</span><br><span class="line">    context.<span class="title function_">beginPath</span>();</span><br><span class="line">    <span class="keyword">var</span> x = <span class="title class_">Math</span>.<span class="title function_">random</span>() * canvas_width;</span><br><span class="line">    <span class="keyword">var</span> y = <span class="title class_">Math</span>.<span class="title function_">random</span>() * canvas_height;</span><br><span class="line">    context.<span class="title function_">moveTo</span>(x, y);</span><br><span class="line">    context.<span class="title function_">lineTo</span>(x + <span class="number">1</span>, y + <span class="number">1</span>);</span><br><span class="line">    context.<span class="title function_">stroke</span>();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动"></p><p>​    <strong>得到随机的颜色值</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">randomColor</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">var</span> r = <span class="title class_">Math</span>.<span class="title function_">floor</span>(<span class="title class_">Math</span>.<span class="title function_">random</span>() * <span class="number">256</span>);</span><br><span class="line">  <span class="keyword">var</span> g = <span class="title class_">Math</span>.<span class="title function_">floor</span>(<span class="title class_">Math</span>.<span class="title function_">random</span>() * <span class="number">256</span>);</span><br><span class="line">  <span class="keyword">var</span> b = <span class="title class_">Math</span>.<span class="title function_">floor</span>(<span class="title class_">Math</span>.<span class="title function_">random</span>() * <span class="number">256</span>);</span><br><span class="line">  <span class="keyword">return</span> <span class="string">&quot;rgb(&quot;</span> + r + <span class="string">&quot;,&quot;</span> + g + <span class="string">&quot;,&quot;</span> + b + <span class="string">&quot;)&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动"></p><p>​    <strong>获取剩余字数</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">countContent</span>(<span class="params">input</span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> content = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;com_num&quot;</span>);</span><br><span class="line">  <span class="keyword">if</span> (content &amp;&amp; input) &#123;</span><br><span class="line">    <span class="keyword">let</span> value = input.<span class="property">value</span>;</span><br><span class="line">    value = value.<span class="title function_">replace</span>(<span class="regexp">/\n|\r/gi</span>, <span class="string">&quot;&quot;</span>);</span><br><span class="line">    content.<span class="property">innerText</span> = <span class="string">`您还可以输入<span class="subst">$&#123;<span class="number">200</span> - value.length&#125;</span>字`</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动"></p><p>​    <strong>评论</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">var</span> show_num = [];</span><br><span class="line">  <span class="title function_">draw</span>(show_num);</span><br><span class="line">  $(<span class="string">&quot;#canvas&quot;</span>).<span class="title function_">on</span>(<span class="string">&quot;click&quot;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title function_">draw</span>(show_num);</span><br><span class="line">  &#125;);</span><br><span class="line">  $(<span class="string">&quot;.btn&quot;</span>).<span class="title function_">on</span>(<span class="string">&quot;click&quot;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> val = $(<span class="string">&quot;.input-val&quot;</span>).<span class="title function_">val</span>().<span class="title function_">toLowerCase</span>();</span><br><span class="line">    <span class="keyword">var</span> num = show_num.<span class="title function_">join</span>(<span class="string">&quot;&quot;</span>); <span class="comment">//用于把数组中的所有元素放入一个字符串。</span></span><br><span class="line">    <span class="keyword">let</span> content = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;com-txt&quot;</span>);</span><br><span class="line">    <span class="keyword">if</span> (content.<span class="property">value</span>== <span class="string">&quot;&quot;</span>) &#123;</span><br><span class="line">      <span class="title function_">alert</span>(<span class="string">&quot;留言内容不能为空&quot;</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (content.<span class="property">value</span>.<span class="property">length</span> &gt; <span class="number">200</span>) &#123;</span><br><span class="line">      <span class="title function_">alert</span>(<span class="string">&quot;字数不能超过200字&quot;</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (val == <span class="string">&quot;&quot;</span>) &#123;</span><br><span class="line">      <span class="title function_">alert</span>(<span class="string">&quot;请输入验证码！&quot;</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (val == num) &#123;</span><br><span class="line">          $(<span class="string">&quot;.input-val&quot;</span>).<span class="title function_">val</span>(<span class="string">&quot;&quot;</span>);</span><br><span class="line">          $(<span class="string">&quot;#com-txt&quot;</span>).<span class="title function_">val</span>(<span class="string">&quot;&quot;</span>);</span><br><span class="line">          <span class="title function_">alert</span>(<span class="string">&quot;提交成功！&quot;</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="title function_">alert</span>(<span class="string">&quot;验证码错误！请重新输入！&quot;</span>);</span><br><span class="line">      $(<span class="string">&quot;.input-val&quot;</span>).<span class="title function_">val</span>(<span class="string">&quot;&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动"></p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>JS自定义select下拉框</title>
      <link href="/2023/09/22/select/"/>
      <url>/2023/09/22/select/</url>
      
        <content type="html"><![CDATA[<p> 之前写项目一直只改变了select框的样式,option一直都是用的原生的,在网上查了一下发现option的样式除了颜色跟字体之外基本上都不可以修改,所以我用div ul li 模拟了select的功能</p><p><strong>效果如图:</strong></p><p><img src="/images/select.png" alt="图片"></p><p> <strong>HTML:</strong></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;select-box&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;select-head&quot;</span> <span class="attr">onclick</span>=<span class="string">&quot;selectblock(this)&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span>&gt;</span>请选择喜欢的食物<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;select-icon&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">&quot;select-body&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">label</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;radio&quot;</span> <span class="attr">name</span>=<span class="string">&quot;food&quot;</span> <span class="attr">hidden</span>&gt;</span><span class="tag">&lt;<span class="name">li</span>&gt;</span>汉堡<span class="tag">&lt;/<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">label</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;radio&quot;</span> <span class="attr">name</span>=<span class="string">&quot;food&quot;</span> <span class="attr">hidden</span>&gt;</span><span class="tag">&lt;<span class="name">li</span>&gt;</span>奶茶<span class="tag">&lt;/<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">label</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;radio&quot;</span> <span class="attr">name</span>=<span class="string">&quot;food&quot;</span> <span class="attr">hidden</span>&gt;</span><span class="tag">&lt;<span class="name">li</span>&gt;</span>火锅<span class="tag">&lt;/<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动"></p><p><strong>CSS:</strong></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.select-head</span>&#123;</span><br><span class="line">  user-<span class="selector-tag">select</span>:none;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">12px</span> <span class="number">12px</span>;;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">150px</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">3px</span>;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#2260ff</span>;</span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line">  <span class="attribute">cursor</span>: pointer;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.select-icon</span>&#123;</span><br><span class="line">  <span class="attribute">display</span>: block;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">15px</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">20px</span>;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">url</span>(<span class="string">&quot;./向下箭头.png&quot;</span>) no-repeat center;</span><br><span class="line">  <span class="attribute">background-size</span>: cover;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">35%</span>;</span><br><span class="line">  <span class="attribute">right</span>: <span class="number">0.5rem</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.icon-Y</span>&#123;</span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">scaleY</span>(-<span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.select-body</span>&#123;</span><br><span class="line">  <span class="attribute">display</span>: none;</span><br><span class="line">  <span class="attribute">margin-top</span>: <span class="number">8px</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#fff</span>;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">2px</span> solid <span class="number">#b5bfd9</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">8px</span>;</span><br><span class="line">  <span class="attribute">flex-direction</span>: column;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">0.5rem</span>;</span><br><span class="line">  <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">3px</span> <span class="number">7px</span> <span class="number">0</span> <span class="number">#c8cfe1</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">157px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.select-body</span> <span class="selector-tag">li</span>&#123;</span><br><span class="line">  user-<span class="selector-tag">select</span>:none;</span><br><span class="line">  <span class="attribute">cursor</span>: pointer;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#4f5d7e</span>;</span><br><span class="line">  <span class="attribute">display</span>: block;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">0.625rem</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">8px</span>;</span><br><span class="line">  <span class="attribute">margin-top</span>: <span class="number">0.25rem</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.select-body</span> <span class="selector-tag">label</span>&#123;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.select-body</span> <span class="selector-tag">input</span><span class="selector-pseudo">:checked</span> + <span class="selector-tag">li</span>&#123;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#e9efff</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#2260ff</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.select-body</span> <span class="selector-tag">li</span><span class="selector-pseudo">:hover</span>&#123;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#e9efff</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动"></p><p><strong>JS:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">selectblock</span>(<span class="params">event</span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> selectBody = event.<span class="property">parentNode</span>.<span class="title function_">querySelectorAll</span>(<span class="string">&quot;.select-body&quot;</span>)[<span class="number">0</span>];</span><br><span class="line">  <span class="keyword">let</span> selectIcon = event.<span class="title function_">getElementsByClassName</span>(<span class="string">&quot;select-icon&quot;</span>)[<span class="number">0</span>];</span><br><span class="line">  <span class="keyword">let</span> selectHead = event.<span class="property">parentNode</span>.<span class="title function_">querySelectorAll</span>(<span class="string">&quot;.select-head&quot;</span>)[<span class="number">0</span>];</span><br><span class="line">  <span class="keyword">if</span> (selectBody.<span class="property">style</span>.<span class="property">display</span> == <span class="string">&quot;block&quot;</span>) &#123;</span><br><span class="line">    selectBody.<span class="property">style</span>.<span class="property">display</span> = <span class="string">&quot;none&quot;</span>;</span><br><span class="line">    selectIcon.<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&quot;icon-Y&quot;</span>);</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    selectBody.<span class="property">style</span>.<span class="property">display</span> = <span class="string">&quot;block&quot;</span>;</span><br><span class="line">    selectIcon.<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&quot;icon-Y&quot;</span>);</span><br><span class="line">    <span class="comment">//点击空白区域下拉框消失</span></span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(<span class="string">&quot;click&quot;</span>, <span class="function">(<span class="params">event</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">let</span> tDom = event.<span class="property">target</span>;</span><br><span class="line">      <span class="keyword">if</span>(selectBody !== tDom &amp;&amp; selectHead !== tDom &amp;&amp; !selectHead.<span class="title function_">contains</span>(tDom))&#123;</span><br><span class="line">        selectBody.<span class="property">style</span>.<span class="property">display</span> = <span class="string">&quot;none&quot;</span>;</span><br><span class="line">        selectIcon.<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&quot;icon-Y&quot;</span>);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  cks = <span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(<span class="string">&quot;.select-body&gt;label&gt;li&quot;</span>);</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; cks.<span class="property">length</span>; i++) &#123;</span><br><span class="line">    cks[i].<span class="property">onclick</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">      cks[i].<span class="property">parentNode</span>.<span class="property">parentNode</span>.<span class="property">style</span>.<span class="property">display</span> = <span class="string">&quot;none&quot;</span>;</span><br><span class="line">      cks[i].<span class="property">parentNode</span>.<span class="property">parentNode</span>.<span class="property">parentNode</span>.<span class="title function_">getElementsByClassName</span>(<span class="string">&quot;select-head&quot;</span>)[<span class="number">0</span>].<span class="title function_">getElementsByTagName</span>(<span class="string">&quot;span&quot;</span>)[<span class="number">0</span>].<span class="property">innerHTML</span> = cks[i].<span class="property">innerHTML</span>;</span><br><span class="line">      cks[i].<span class="property">parentNode</span>.<span class="property">parentNode</span>.<span class="property">parentNode</span>.<span class="title function_">getElementsByClassName</span>(<span class="string">&quot;select-head&quot;</span>)[<span class="number">0</span>].<span class="title function_">getElementsByTagName</span>(<span class="string">&quot;span&quot;</span>)[<span class="number">1</span>].<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&quot;icon-Y&quot;</span>);</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">let</span> ckd = cks[i].<span class="property">parentNode</span>.<span class="title function_">getElementsByTagName</span>(<span class="string">&quot;input&quot;</span>)[<span class="number">0</span>];</span><br><span class="line">    <span class="keyword">if</span> (ckd.<span class="property">checked</span> == <span class="literal">true</span>) &#123;</span><br><span class="line">      cks[i].<span class="property">parentNode</span>.<span class="property">parentNode</span>.<span class="property">parentNode</span>.<span class="title function_">getElementsByClassName</span>(<span class="string">&quot;select-head&quot;</span>)[<span class="number">0</span>].<span class="title function_">getElementsByTagName</span>(<span class="string">&quot;span&quot;</span>)[<span class="number">0</span>].<span class="property">innerHTML</span> = cks[i].<span class="property">innerHTML</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动"></p><p>使用的时候引入一下css,js然后改一下name就可以了</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>node传formdata数据</title>
      <link href="/2023/08/13/nodeformdata/"/>
      <url>/2023/08/13/nodeformdata/</url>
      
        <content type="html"><![CDATA[<h2 id="一-准备"><a href="#一-准备" class="headerlink" title="一.准备"></a>一.准备</h2><p>千万不要忘记引form-data</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fs=<span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> multipart = <span class="built_in">require</span>(<span class="string">&#x27;connect-multiparty&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> mult=<span class="title function_">multipart</span>();</span><br><span class="line"><span class="keyword">const</span> router = express.<span class="title class_">Router</span>();</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">FormData</span>=<span class="built_in">require</span>(<span class="string">&#x27;form-data&#x27;</span>);</span><br></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动"></p><h2 id="二-封装接口"><a href="#二-封装接口" class="headerlink" title="二.封装接口"></a>二.封装接口</h2><p>下面拿上传教师信息的接口举例</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">router.<span class="title function_">post</span>(<span class="string">&quot;/addTeachers&quot;</span>,mult,<span class="function">(<span class="params">req,res</span>)=&gt;</span>&#123;</span><br><span class="line">  <span class="keyword">let</span> formData=<span class="keyword">new</span> <span class="title class_">FormData</span>()</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;files&quot;</span>,req.<span class="property">files</span>)</span><br><span class="line">  formData.<span class="title function_">append</span>(<span class="string">&quot;file&quot;</span>,fs.<span class="title function_">createReadStream</span>(req.<span class="property">files</span>.<span class="property">file</span>.<span class="property">path</span>))</span><br><span class="line">  <span class="keyword">let</span> token = req.<span class="property">session</span>.<span class="property">token</span>;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(formData);</span><br><span class="line">  <span class="title function_">axios</span>(&#123;</span><br><span class="line">      <span class="attr">method</span>:<span class="string">&#x27;POST&#x27;</span>,</span><br><span class="line">      <span class="attr">url</span>:<span class="string">&#x27;/admin/insertTeachers&#x27;</span>,</span><br><span class="line">      <span class="attr">processData</span>: <span class="literal">false</span>,</span><br><span class="line">      <span class="attr">contentType</span>: <span class="literal">false</span>,</span><br><span class="line">      <span class="attr">data</span>:formData,</span><br><span class="line">      <span class="attr">maxBodyLebgth</span>:<span class="title class_">Infinity</span>,</span><br><span class="line">      <span class="attr">maxContentLength</span>:<span class="title class_">Infinity</span>,</span><br><span class="line">      <span class="attr">headers</span>:&#123;</span><br><span class="line">        <span class="attr">formData</span>:formData.<span class="title function_">getHeaders</span>(),</span><br><span class="line">        <span class="attr">token</span>:token</span><br><span class="line">      &#125;,</span><br><span class="line">  &#125;)</span><br><span class="line">  .<span class="title function_">then</span>(<span class="function">(<span class="params">r</span>)=&gt;</span>&#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;成功&quot;</span>,r);</span><br><span class="line">      res.<span class="title function_">send</span>(&#123;<span class="attr">err</span>:<span class="number">0</span>,<span class="attr">mag</span>:<span class="string">&#x27;导入成功&#x27;</span>&#125;)</span><br><span class="line">  &#125;)</span><br><span class="line">  .<span class="title function_">catch</span>(<span class="function">(<span class="params">e</span>)=&gt;</span>&#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;失败&quot;</span>,e);</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动"></p><h2 id="三-注意"><a href="#三-注意" class="headerlink" title="三.注意"></a>三.注意</h2><p>注意上面第四行代码</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">formData.<span class="title function_">append</span>(<span class="string">&quot;file&quot;</span>,fs.<span class="title function_">createReadStream</span>(req.<span class="property">files</span>.<span class="property">file</span>.<span class="property">path</span>))</span><br></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动"></p><p> 这里是req.files.file而不是req.file, req.file是空值</p><p><strong>多文件上传</strong></p><p> 如果是多文件上传,这行代码应该换成:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> a <span class="keyword">in</span> req.<span class="property">files</span>) &#123;</span><br><span class="line">     formData.<span class="title function_">append</span>(<span class="string">&#x27;file&#x27;</span>, fs.<span class="title function_">createReadStream</span>(req.<span class="property">files</span>[a].<span class="property">path</span>))</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动"></p><p><strong>请求头</strong></p><p>注意这里的请求头</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">headers</span>:&#123;</span><br><span class="line">          <span class="attr">formData</span>:formData.<span class="title function_">getHeaders</span>(),</span><br><span class="line">          <span class="attr">token</span>:token</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动"></p><p>注意这里要写成 formData:formData.getHeaders()  ,不要写成下面这样:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">content-<span class="attr">type</span>:multipart/form-data</span><br></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动"></p><h2 id="四-js调用"><a href="#四-js调用" class="headerlink" title="四.js调用"></a>四.js调用</h2><p> 这里少了一个文件类型判断,最好加上</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">addTeachers</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> formData = <span class="keyword">new</span> <span class="title class_">FormData</span>();</span><br><span class="line">  <span class="keyword">let</span> file = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;file&quot;</span>).<span class="property">files</span>[<span class="number">0</span>];</span><br><span class="line">  formData.<span class="title function_">append</span>(<span class="string">&quot;file&quot;</span>, file);</span><br><span class="line">  <span class="title function_">axios</span>(&#123;</span><br><span class="line">    <span class="attr">method</span>: <span class="string">&quot;POST&quot;</span>,</span><br><span class="line">    <span class="attr">processData</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">contentType</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">url</span>: <span class="string">`<span class="subst">$&#123;head&#125;</span>admin/addTeachers`</span>,</span><br><span class="line">    <span class="attr">data</span>: formData,</span><br><span class="line">  &#125;)</span><br><span class="line">  .<span class="title function_">then</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="title function_">alert</span>(<span class="string">&#x27;上传成功!&#x27;</span>)</span><br><span class="line">  &#125;)</span><br><span class="line">  .<span class="title function_">catch</span>(<span class="function">(<span class="params">err</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(err);</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动"></p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>项目中的封装函数</title>
      <link href="/2023/08/06/function/"/>
      <url>/2023/08/06/function/</url>
      
        <content type="html"><![CDATA[<h2 id="一-去除空格"><a href="#一-去除空格" class="headerlink" title="一.去除空格"></a>一.去除空格</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">isnull</span>(<span class="params">val</span>) &#123;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">const</span> str = val.<span class="title function_">replace</span>(<span class="regexp">/(^\s*)|(\s*$)/g</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">if</span> (str == <span class="string">&#x27;&#x27;</span> || str == <span class="literal">undefined</span> || str == <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动"></p><h2 id="二-判断图片类型"><a href="#二-判断图片类型" class="headerlink" title="二.判断图片类型"></a>二.判断图片类型</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span>  <span class="title function_">ispicture</span>(<span class="params">file</span>)&#123;</span><br><span class="line">    <span class="keyword">let</span> type=file.<span class="property">type</span>;</span><br><span class="line">    <span class="keyword">if</span>(type===<span class="string">&#x27;image/git&#x27;</span>||type===<span class="string">&#x27;image/jpeg&#x27;</span>||type===<span class="string">&#x27;image/jpg&#x27;</span>||type===<span class="string">&#x27;image/png&#x27;</span>||type===<span class="string">&#x27;image/webp&#x27;</span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动"></p><h2 id="三-正则表达式"><a href="#三-正则表达式" class="headerlink" title="三.正则表达式"></a>三.正则表达式</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> emailreg=<span class="regexp">/^([a-z0-9A-Z]+[-|\.]?)+[a-z0-9A-Z]@([a-z0-9A-Z]+(-[a-z0-9A-Z]+)?\.)+[a-zA-Z]&#123;2,&#125;$/</span>;</span><br><span class="line"><span class="keyword">let</span> psreg=<span class="regexp">/^(?=.*\d)(?=.*[A-z])[\da-zA-Z]&#123;6,12&#125;$/</span>;</span><br><span class="line"><span class="keyword">let</span> agereg=<span class="regexp">/^(([0-9]|[1-9][1-9]|1[0-1][0-9])(\\.[0-9]+)?|119)$/</span>;</span><br><span class="line"><span class="keyword">let</span> hightreg=<span class="regexp">/^([1-9][0-9]&#123;0,3&#125;(\.\d&#123;1,3&#125;)?|5)$/</span>;</span><br></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动"></p><h2 id="四-封装confirm"><a href="#四-封装confirm" class="headerlink" title="四.封装confirm"></a>四.封装confirm</h2><p>js</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">confirm</span>(<span class="params">msg</span>)&#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="title class_">Confirmcnt</span> = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;div&#x27;</span>);</span><br><span class="line">    <span class="title class_">Confirmcnt</span>.<span class="property">innerHTML</span> = <span class="string">`</span></span><br><span class="line"><span class="string">    &lt;div class=&quot;mask-color&quot;&gt;&lt;/div&gt;</span></span><br><span class="line"><span class="string">    &lt;div id=&#x27;mask&#x27;&gt;</span></span><br><span class="line"><span class="string">        &lt;div id=&quot;mask-top&quot;&gt;&lt;span&gt;提示&lt;/span&gt;&lt;/div&gt;</span></span><br><span class="line"><span class="string">        &lt;div id=&quot;mask-main&quot;&gt;<span class="subst">$&#123;msg&#125;</span>&lt;/div&gt;</span></span><br><span class="line"><span class="string">        &lt;button style=&quot;background-color: #f0f9eb; color: #67c23a;&quot;&gt;确认&lt;/button&gt;&lt;button style=&quot;background-color: #fff; border: #d7d9d6 1px solid;&quot;&gt;取消&lt;/button&gt;</span></span><br><span class="line"><span class="string">    &lt;/div&gt;</span></span><br><span class="line"><span class="string">      `</span>;</span><br><span class="line">    <span class="variable language_">document</span>.<span class="property">body</span>.<span class="title function_">appendChild</span>(<span class="title class_">Confirmcnt</span>);</span><br><span class="line">    <span class="keyword">let</span> conPromise= <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve,reject</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> button=<span class="title class_">Confirmcnt</span>.<span class="title function_">getElementsByTagName</span>(<span class="string">&#x27;button&#x27;</span>);</span><br><span class="line">        button[<span class="number">0</span>].<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">            <span class="variable language_">document</span>.<span class="property">body</span>.<span class="title function_">removeChild</span>(<span class="title class_">Confirmcnt</span>);</span><br><span class="line">            <span class="title function_">resolve</span>()</span><br><span class="line">        &#125;)</span><br><span class="line">        button[<span class="number">1</span>].<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">            <span class="variable language_">document</span>.<span class="property">body</span>.<span class="title function_">removeChild</span>(<span class="title class_">Confirmcnt</span>);</span><br><span class="line">            <span class="title function_">reject</span>()</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="keyword">return</span> conPromise;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动"></p><p>css</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#mask</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: fixed;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="number">#fff</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">300px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">150px</span>;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">50%</span>;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">52%</span>;</span><br><span class="line">    <span class="attribute">display</span>: block;</span><br><span class="line">    <span class="attribute">margin-left</span>: -<span class="number">200px</span>;</span><br><span class="line">    <span class="attribute">margin-top</span>: -<span class="number">125px</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">4px</span>;</span><br><span class="line">    <span class="attribute">z-index</span>: <span class="number">9999</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.mask-color</span>&#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">position</span>: fixed;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">opacity</span>: <span class="number">0.6</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="number">#dbd9d9</span>;</span><br><span class="line">    <span class="attribute">z-index</span>: <span class="number">998</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#mask</span> <span class="selector-tag">button</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">50px</span>;</span><br><span class="line">    <span class="attribute">margin-left</span>: <span class="number">65px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">30px</span>;</span><br><span class="line">    <span class="attribute">margin-top</span>: <span class="number">5.5px</span>;</span><br><span class="line">    <span class="attribute">border</span>: none;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#000</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">3px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#mask-top</span> &#123;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">4px</span> <span class="number">4px</span> <span class="number">0</span> <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">30px</span>;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">15px</span>;</span><br><span class="line">    <span class="attribute">line-height</span>: <span class="number">30px</span>;</span><br><span class="line">    <span class="attribute">padding-left</span>: <span class="number">20px</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="number">#f0f9eb</span>;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#67c23a</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#mask-main</span> &#123;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">80px</span>;</span><br><span class="line">    <span class="attribute">text-align</span>: center;</span><br><span class="line">    <span class="attribute">line-height</span>: <span class="number">80px</span>;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">15px</span>;</span><br><span class="line">    <span class="attribute">border-bottom</span>: <span class="number">1px</span> solid <span class="number">#ebeef5</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动"></p><p>使用方法:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">delcourse</span>(<span class="params">event</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> id = event.<span class="property">parentNode</span>.<span class="property">parentNode</span>.<span class="property">id</span>;</span><br><span class="line">    <span class="title function_">confirm</span>(<span class="string">&quot;真的要删除吗?&quot;</span>)</span><br><span class="line">        .<span class="title function_">then</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">            axios.<span class="title function_">delete</span>(<span class="string">`<span class="subst">$&#123;head&#125;</span>class/delclass?id=<span class="subst">$&#123;id&#125;</span>`</span>, &#123;</span><br><span class="line">                <span class="attr">headers</span>: &#123;</span><br><span class="line">                    <span class="string">&#x27;token&#x27;</span>: token</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;)</span><br><span class="line">                .<span class="title function_">then</span>(<span class="function"><span class="params">r</span> =&gt;</span> &#123;</span><br><span class="line">                    content.<span class="property">innerHTML</span> = <span class="string">``</span>;</span><br><span class="line">                    <span class="title function_">getclasspage</span>();</span><br><span class="line">                &#125;)</span><br><span class="line">        &#125;)</span><br><span class="line">        .<span class="title function_">catch</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;取消删除&quot;</span>);</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动"></p><h2 id="五-封装alert"><a href="#五-封装alert" class="headerlink" title="五.封装alert"></a>五.封装alert</h2><p>js</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">alertSuccess</span>(<span class="params">msg</span>)&#123;</span><br><span class="line">    <span class="keyword">let</span> alertBox= <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;div&#x27;</span>);</span><br><span class="line">    alertBox.<span class="property">className</span>=<span class="string">&#x27;alert alert-success&#x27;</span>;</span><br><span class="line">    alertBox.<span class="property">innerHTML</span>=<span class="string">`&lt;svg t=&quot;1690011096577&quot; class=&quot;alert-icon&quot; viewBox=&quot;0 0 1024 1024&quot; version=&quot;1.1&quot; xmlns=&quot;http://www.w3.org/2000/svg&quot; p-id=&quot;2337&quot; width=&quot;200&quot; height=&quot;200&quot;&gt;&lt;path d=&quot;M512 1024C229.248 1024 0 794.752 0 512S229.248 0 512 0s512 229.248 512 512-229.248 512-512 512z m-114.176-310.954667a53.333333 53.333333 0 0 0 75.434667 0l323.328-323.328a53.333333 53.333333 0 1 0-75.434667-75.434666l-287.914667 283.306666-128.853333-128.853333a53.333333 53.333333 0 1 0-75.434667 75.434667l168.874667 168.874666z&quot; fill=&quot;#67c23a&quot; p-id=&quot;2338&quot;&gt;&lt;/path&gt;&lt;/svg&gt;</span></span><br><span class="line"><span class="string">    &lt;p&gt;<span class="subst">$&#123;msg&#125;</span>&lt;/p&gt;`</span>;</span><br><span class="line">    <span class="variable language_">document</span>.<span class="property">body</span>.<span class="title function_">appendChild</span>(alertBox);</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">document</span>.<span class="title function_">getElementsByClassName</span>(<span class="string">&#x27;alert&#x27;</span>)[<span class="number">0</span>].<span class="property">style</span>.<span class="property">opacity</span>=<span class="number">0</span>;</span><br><span class="line">        <span class="built_in">setTimeout</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">            <span class="variable language_">document</span>.<span class="property">body</span>.<span class="title function_">removeChild</span>(alertBox);</span><br><span class="line">        &#125;,<span class="number">2000</span>)</span><br><span class="line">    &#125;, <span class="number">1000</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">alerterror</span>(<span class="params">msg</span>)&#123;</span><br><span class="line">    <span class="keyword">let</span> alertBox= <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;div&#x27;</span>);</span><br><span class="line">    alertBox.<span class="property">className</span>=<span class="string">&#x27;alert alert-error&#x27;</span>;</span><br><span class="line">    alertBox.<span class="property">innerHTML</span>=<span class="string">`</span></span><br><span class="line"><span class="string">    &lt;svg t=&quot;1690015321493&quot; class=&quot;alert-icon&quot; viewBox=&quot;0 0 1024 1024&quot; version=&quot;1.1&quot; xmlns=&quot;http://www.w3.org/2000/svg&quot; p-id=&quot;2306&quot; width=&quot;200&quot; height=&quot;200&quot;&gt;&lt;path d=&quot;M512 64C264.8 64 64 264.8 64 512s200.8 448 448 448 448-200.8 448-448S759.2 64 512 64z m238.4 641.6l-45.6 45.6L512 557.6 318.4 750.4l-45.6-45.6L467.2 512 273.6 318.4l45.6-45.6L512 467.2l193.6-193.6 45.6 45.6L557.6 512l192.8 193.6z&quot; p-id=&quot;2307&quot; fill=&quot;#f56c6c&quot;&gt;&lt;/path&gt;&lt;/svg&gt;</span></span><br><span class="line"><span class="string">    &lt;p&gt;<span class="subst">$&#123;msg&#125;</span>&lt;/p&gt;`</span>;</span><br><span class="line">    <span class="variable language_">document</span>.<span class="property">body</span>.<span class="title function_">appendChild</span>(alertBox);</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">document</span>.<span class="title function_">getElementsByClassName</span>(<span class="string">&#x27;alert&#x27;</span>)[<span class="number">0</span>].<span class="property">style</span>.<span class="property">opacity</span>=<span class="number">0</span>;</span><br><span class="line">        <span class="built_in">setTimeout</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">            <span class="variable language_">document</span>.<span class="property">body</span>.<span class="title function_">removeChild</span>(alertBox);</span><br><span class="line">        &#125;,<span class="number">2000</span>)</span><br><span class="line">    &#125;, <span class="number">1000</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动"></p><p>css</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">.<span class="property">alert</span>-error &#123;</span><br><span class="line">    background-<span class="attr">color</span>: #fef0f0;</span><br><span class="line">    border-<span class="attr">color</span>: #fde2e2;</span><br><span class="line">  &#125;</span><br><span class="line">  .<span class="property">alert</span>-error p &#123;</span><br><span class="line">    <span class="attr">color</span>: #f56c6c;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  .<span class="property">alert</span>-success &#123;</span><br><span class="line">    background-<span class="attr">color</span>: #f0f9eb;</span><br><span class="line">    border-<span class="attr">color</span>: #e1f3d8;</span><br><span class="line">  &#125;</span><br><span class="line">  .<span class="property">alert</span>-success p &#123;</span><br><span class="line">    <span class="attr">color</span>: #67c23a;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line">  .<span class="property">alert</span> &#123;</span><br><span class="line">    <span class="attr">display</span>: flex;</span><br><span class="line">    min-<span class="attr">width</span>: 380px;</span><br><span class="line">    <span class="attr">position</span>: absolute;</span><br><span class="line">    border-<span class="attr">radius</span>: 4px;</span><br><span class="line">    <span class="attr">padding</span>: 15px 15px 15px 20px;</span><br><span class="line">    <span class="attr">border</span>: 1px solid #ebeef5;</span><br><span class="line">    <span class="attr">left</span>: <span class="number">40</span>%;</span><br><span class="line">    <span class="attr">top</span>:30px;</span><br><span class="line">    <span class="attr">opacity</span>: <span class="number">1</span>;</span><br><span class="line">    <span class="attr">transition</span>:opacity 2s;</span><br><span class="line">    z-<span class="attr">index</span>: <span class="number">9999</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  .<span class="property">alert</span> p &#123;</span><br><span class="line">    line-<span class="attr">height</span>: <span class="number">1</span>;</span><br><span class="line">    font-<span class="attr">size</span>: 14px;</span><br><span class="line">  &#125;</span><br><span class="line">  .<span class="property">alert</span> .<span class="property">alert</span>-icon &#123;</span><br><span class="line">    <span class="attr">width</span>: 14px;</span><br><span class="line">    <span class="attr">height</span>: 14px;</span><br><span class="line">    margin-<span class="attr">right</span>: 10px;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动"></p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Node.js上传图片</title>
      <link href="/2023/07/30/nodeimage/"/>
      <url>/2023/07/30/nodeimage/</url>
      
        <content type="html"><![CDATA[<h3 id="一-准备"><a href="#一-准备" class="headerlink" title="一.准备"></a>一.准备</h3><p>下载第三方插件Multer</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install multer --save</span><br></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动"></p><h3 id="二-在入口文件下编写如下代码"><a href="#二-在入口文件下编写如下代码" class="headerlink" title="二.在入口文件下编写如下代码"></a>二.在入口文件下编写如下代码</h3><ul><li>引入依赖</li><li>封装处理路径函数</li><li>设置 multer 的配置对象</li><li>为 multer 添加配置</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 引入依赖</span></span><br><span class="line"><span class="keyword">const</span> multer = <span class="built_in">require</span>(<span class="string">&#x27;multer&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> express=<span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>); </span><br><span class="line"><span class="keyword">const</span> app=<span class="title function_">express</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">//解析post</span></span><br><span class="line"><span class="keyword">const</span> bodyparser=<span class="built_in">require</span>(<span class="string">&#x27;body-parser&#x27;</span>)</span><br><span class="line">app.<span class="title function_">use</span>(bodyparser.<span class="title function_">urlencoded</span>(&#123; <span class="attr">extended</span>: <span class="literal">false</span> &#125;));</span><br><span class="line">app.<span class="title function_">use</span>(bodyparser.<span class="title function_">json</span>());</span><br><span class="line"></span><br><span class="line"><span class="comment">//路由</span></span><br><span class="line"><span class="keyword">const</span> fileRouter=<span class="built_in">require</span>(<span class="string">&#x27;./router/fileRouter&#x27;</span>);</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">use</span>(<span class="string">&#x27;/&#x27;</span>,fileRouter);</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">listen</span>(<span class="number">3000</span>,<span class="function">()=&gt;</span>&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;server start&#x27;</span>);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动"></p><h3 id="三-在router文件夹的fileRouter-js文件下编写如下代码"><a href="#三-在router文件夹的fileRouter-js文件下编写如下代码" class="headerlink" title="三.在router文件夹的fileRouter.js文件下编写如下代码"></a>三.在router文件夹的fileRouter.js文件下编写如下代码</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> express=<span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> router=express.<span class="title class_">Router</span>();</span><br><span class="line"><span class="keyword">const</span> multer=<span class="built_in">require</span>(<span class="string">&#x27;multer&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 设置 multer 的配置对象</span></span><br><span class="line"><span class="keyword">var</span> storage = multer.<span class="title function_">diskStorage</span>(&#123;</span><br><span class="line">    <span class="attr">destination</span>: <span class="keyword">function</span>(<span class="params">req,file,cb</span>)&#123;</span><br><span class="line">        <span class="comment">//指定文件路径</span></span><br><span class="line">        <span class="title function_">cb</span>(<span class="literal">null</span>,<span class="string">&#x27;../Static/img&#x27;</span>)</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">filename</span>: <span class="keyword">function</span>(<span class="params">req,file,cb</span>)&#123;</span><br><span class="line">        <span class="comment">//指定文件名</span></span><br><span class="line">        <span class="keyword">let</span> exts=file.<span class="property">originalname</span>.<span class="title function_">split</span>(<span class="string">&#x27;.&#x27;</span>);</span><br><span class="line">        <span class="keyword">let</span> ext=exts[exts.<span class="property">length</span>-<span class="number">1</span>];</span><br><span class="line">        <span class="keyword">let</span> tmpname=(<span class="keyword">new</span> <span class="title class_">Date</span>()).<span class="title function_">getTime</span>()+<span class="built_in">parseInt</span>(<span class="title class_">Math</span>.<span class="title function_">random</span>()*<span class="number">9999</span>);</span><br><span class="line">        <span class="title function_">cb</span>(<span class="literal">null</span>,<span class="string">`<span class="subst">$&#123;tmpname&#125;</span>.<span class="subst">$&#123;ext&#125;</span>`</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">var</span> upload = <span class="title function_">multer</span>(&#123;</span><br><span class="line">    <span class="attr">storage</span>: storage</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">//图片上传 //为multer添加配置</span></span><br><span class="line">router.<span class="title function_">post</span>(<span class="string">&#x27;/ChangePicture&#x27;</span>,upload.<span class="title function_">single</span>(<span class="string">&#x27;picture&#x27;</span>),<span class="function">(<span class="params">req,res</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">let</span> &#123;size,mimetype&#125;=req.<span class="property">file</span>;</span><br><span class="line">    <span class="keyword">let</span> types=[<span class="string">&#x27;jpg&#x27;</span>,<span class="string">&#x27;gif&#x27;</span>,<span class="string">&#x27;jpeg&#x27;</span>,<span class="string">&#x27;png&#x27;</span>];   <span class="comment">//允许上传的数据类型;</span></span><br><span class="line">    <span class="keyword">let</span> tmptype=mimetype.<span class="title function_">split</span>(<span class="string">&#x27;/&#x27;</span>)[<span class="number">1</span>];</span><br><span class="line">    <span class="keyword">if</span>(req.<span class="property">file</span>)&#123;</span><br><span class="line">        <span class="keyword">if</span>(size&gt;=<span class="number">5000000</span>)&#123;</span><br><span class="line">            res.<span class="title function_">send</span>(&#123;<span class="attr">err</span>:-<span class="number">1</span>,<span class="attr">msg</span>:<span class="string">&#x27;图片内存大于5MB!&#x27;</span>&#125;);    <span class="comment">//图片大小</span></span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(types.<span class="title function_">indexOf</span>(tmptype)==-<span class="number">1</span>)&#123;</span><br><span class="line">            res.<span class="title function_">send</span>(&#123;<span class="attr">err</span>:-<span class="number">2</span>,<span class="attr">msg</span>:<span class="string">&#x27;文件类型错误!&#x27;</span>&#125;);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(req.<span class="property">file</span>);</span><br><span class="line">            <span class="keyword">let</span> url=<span class="string">`/public/img/<span class="subst">$&#123;req.file.filename&#125;</span>`</span>;</span><br><span class="line">                res.<span class="title function_">send</span>(&#123;<span class="attr">err</span>:<span class="number">0</span>,<span class="attr">msg</span>:<span class="string">&#x27;图片上传成功!&#x27;</span>,<span class="attr">img</span>:<span class="string">`<span class="subst">$&#123;url&#125;</span>`</span>&#125;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            res.<span class="title function_">send</span>(&#123;<span class="attr">err</span>:-<span class="number">1</span>,<span class="attr">mag</span>:<span class="string">&#x27;参数错误!&#x27;</span>&#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span>=router;</span><br></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动"></p><p>在该配置中可以设置文件保存的地址、文件名称、限制上传的文件格式、文件大小</p><p>上面的 upload.single(‘picture’) 表示单文件上传，并且字段名为 “picture”，后面上传图片的字段必须保持一致</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>JavaScript正则表达式与数据类型转换</title>
      <link href="/2023/03/04/regular/"/>
      <url>/2023/03/04/regular/</url>
      
        <content type="html"><![CDATA[<h1 id="正则表达式"><a href="#正则表达式" class="headerlink" title="正则表达式"></a>正则表达式</h1><p><strong>简介</strong>:正则表达式(regular expression)描述了一种字符串匹配的模式（pattern），可以用来检查一个串是否含有某种子串、将匹配的子串替换或者从某个串中取出符合某个条件的子串等。</p><h3 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h3><p><strong>var 变量 &#x3D; new RegExp(正则表达式)</strong></p><p><strong>一:</strong></p><p>使用typeof检查正则对象,会返回object</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> reg = <span class="keyword">new</span> <span class="title class_">RegExp</span>(<span class="string">&quot;a&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="variable language_">console</span>.<span class="property">logreg</span>.<span class="title function_">test</span>(<span class="string">&quot;abc&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">/*控制台:    &quot;object&quot; */</span></span><br></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动"></p><p><strong>二:</strong> </p><p><strong>test( )</strong></p><p>使用这个方法可以用来检查一个字符串是否符合正则表达式的规则,如果符合返回true,否则返回false.</p><p><strong>三:</strong></p><p>在构造函数中可以传递匹配模式作为第二个参数</p><table><thead><tr><th>i</th><th>忽略大小</th></tr></thead><tbody><tr><td>g</td><td>全局匹配模式</td></tr></tbody></table><blockquote><p> var reg &#x3D; new RegExp(“a”,”i”)</p><p> var reg &#x3D; new RegExp(“a”,”g”)</p></blockquote><p><strong>四:</strong></p><table><thead><tr><th>, [ ]</th><th>或</th></tr></thead><tbody><tr><td>[A-Z]</td><td>任意大写字母</td></tr><tr><td>[a-z]</td><td>任意小写字母</td></tr><tr><td>[A-z]</td><td>任意字母</td></tr></tbody></table><blockquote><p>reg &#x3D;&#x3D; a\b</p><p>使用方法:     reg &#x3D; &#x2F;a\b &#x2F;</p></blockquote><p><strong>五:</strong></p><p><strong>search( )</strong>    <strong>可以搜索字符串中是否含有指定内容</strong></p><p>​    如果搜索到指定内容,则会返回第一次出现的索引,如果没有则返回-1</p><p>​    它可以接受一个正则表达式作为参数,让后根据正则表达式去检索字符串</p><p><strong>六:</strong></p><p><strong>match( )</strong>     <strong>可以根据正则表达式,从一个字符串中将符合条件的内容提取出来</strong></p><p>​    默认情况下match只会找到第一个符合要求的内容,找到以后就会停止</p><p>​    可以设置正则表达式为全局匹配模式来解决</p><p>​    可以为一个正则表达式设置多个匹配模式,且顺序无所谓</p><p><strong>八:</strong></p><p><strong>split( )</strong>     <strong>可以将一个字符串拆分为一个数组</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str =<span class="string">&quot;1a2b3c4d5e6f7&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> result = str.<span class="title function_">split</span>([A-z])</span><br><span class="line"></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(result)</span><br><span class="line"></span><br><span class="line"><span class="comment">/*控制台结果:    &quot;1,2,3,4,5,6,7&quot; */</span></span><br></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动"></p><h2 id="数据类型转换"><a href="#数据类型转换" class="headerlink" title="数据类型转换"></a>数据类型转换</h2><h3 id="一-将其它的数据类型转换为String"><a href="#一-将其它的数据类型转换为String" class="headerlink" title="一:将其它的数据类型转换为String"></a>一:将其它的数据类型转换为String</h3><p>方式一:    <strong>调用toString( )方法</strong></p><p>​    <strong>该方法不会影响变量,它会将转换的结果返回</strong> </p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">被转换的类型.<span class="title function_">toString</span>( )</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> a = <span class="number">123</span>;</span><br><span class="line"></span><br><span class="line">a = a.<span class="title function_">toString</span>( );</span><br></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动"></p><p>方式二:    <strong>调用String( )函数</strong>,并将被转换的数据作为参数传递给函数</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">a = <span class="title class_">String</span>(a);</span><br></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动"></p><p>对于Number和Boolean实际上就是调用的toString( )方法</p><h3 id="二-将其它的数据类型转换为Number"><a href="#二-将其它的数据类型转换为Number" class="headerlink" title="二:将其它的数据类型转换为Number"></a>二:将其它的数据类型转换为Number</h3><p>方式一:     <strong>使用Number( )函数</strong></p><p><strong>字符串–&gt;数字</strong></p><p>**1.**如果是纯数字的字符串,直接转换为数字</p><p><strong>2</strong>.如果字符串中有非数字的内容,则转换为NaN(非数)</p><p><strong>3</strong>.如果字符串是一个空串或者是一个全是空格的字符串,则转换为0</p><p><strong>布尔–&gt;数字</strong></p><table><thead><tr><th>true</th><th>1</th></tr></thead><tbody><tr><td>false</td><td>0</td></tr></tbody></table><p><strong>其它–&gt;数字</strong></p><table><thead><tr><th>Null</th><th>0</th></tr></thead><tbody><tr><td>undefined</td><td>NaN</td></tr></tbody></table><p>方式二:  <strong>针对字符串</strong></p><p>​    parseInt( )把一个字符串转换成一个整数</p><p>​    parseFloat( )把一个字符串转换成一个浮点数</p><blockquote><p>a &#x3D; parseInt(a);</p></blockquote>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Flex布局与JavaScript</title>
      <link href="/2023/02/26/flex/"/>
      <url>/2023/02/26/flex/</url>
      
        <content type="html"><![CDATA[<h1 id="Flex布局"><a href="#Flex布局" class="headerlink" title="Flex布局"></a>Flex布局</h1><h3 id="设置-了display-属性的值为-flex-或-inline-flex的盒子被定义为弹性容器"><a href="#设置-了display-属性的值为-flex-或-inline-flex的盒子被定义为弹性容器" class="headerlink" title="设置 了display 属性的值为 flex 或 inline-flex的盒子被定义为弹性容器"></a>设置 了display 属性的值为 flex 或 inline-flex的盒子被定义为弹性容器</h3><p>弹性盒子的默认值为:水平方向为主轴,左对齐,单行排列,高度沾满整个容器</p><h3 id="一-容器属性"><a href="#一-容器属性" class="headerlink" title="一:容器属性"></a>一:容器属性</h3><h3 id="flex-direction"><a href="#flex-direction" class="headerlink" title="flex-direction:"></a><strong>flex-direction:</strong></h3><p>​    <strong>row</strong>（默认值）：主轴为水平方向，起点在左端。</p><p>​    <strong>row-reverse</strong>：主轴为水平方向，起点在右端。</p><p>​    <strong>column</strong>：主轴为垂直方向，起点在上沿。</p><p>​    <strong>column-reverse</strong>：主轴为垂直方向，起点在下沿。  </p><p><strong>flex-wrap</strong>:</p><p>​    <strong>nowrap</strong>（默认）：不换行。</p><p>​    <strong>wrap</strong>：换行，第一行在上方。</p><p>​    <strong>wrap-reverse</strong>：换行，第一行在下方。</p><p><strong>justify-content</strong>:</p><p>​    flex-start（默认值）：左对齐</p><p>​    flex-end：右对齐</p><p>​    center： 居中</p><p>​    space-between：两端对齐，项目之间的间隔都相等。</p><p>​    space-around：每个项目两侧的间隔相等。所以，项目之间的间隔比项目与边框的间隔大一倍.</p><p><strong>align-items</strong>:</p><p>​    <strong>flex-start</strong>：交叉轴的起点对齐。</p><p>​    <strong>flex-end</strong>：交叉轴的终点对齐。</p><p>​    <strong>center</strong>：交叉轴的中点对齐。</p><p>​    <strong>baseline</strong>: 项目的第一行文字的基线对齐。</p><p>​    <strong>stretch</strong>（默认值）：如果项目未设置高度或设为auto，将占满整个容器的高度。</p><p><strong>align-content</strong>:</p><p>定义了多根轴线的对齐方式，如果项目只有一根轴线，那么该属性将不起作用</p><p>​    flex-start：与交叉轴的起点对齐。</p><p>​    flex-end：与交叉轴的终点对齐。</p><p>​    center：与交叉轴的中点对齐。</p><p>​    space-between：与交叉轴两端对齐，轴线之间的间隔平均分布。</p><p>​    space-around：每根轴线两侧的间隔都相等。所以，轴线之间的间隔比轴线与边框的间隔大一倍。</p><p>​    stretch（默认值）：轴线占满整个交叉轴。</p><p><img src="/images/flex.png" alt="图片"></p><h3 id="二-项目属性"><a href="#二-项目属性" class="headerlink" title="二:项目属性"></a>二:项目属性</h3><p><strong>order属性</strong>:</p><p><code>order</code>属性定义项目的排列顺序。数值越小，排列越靠前，默认为0。</p><p>格式:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">.<span class="property">item</span> &#123;</span><br><span class="line">  <span class="attr">order</span>: &lt;integer&gt;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动"></p><p><strong>flex-grow属性</strong>:</p><p><code>flex-grow</code>属性定义项目的放大比例，默认为<code>0</code>，即如果存在剩余空间，也不放大。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">.<span class="property">item</span> &#123;</span><br><span class="line">  flex-<span class="attr">grow</span>: &lt;number&gt;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动"></p><p><strong>flex-shrink属性</strong></p><p><code>flex-shrink</code>属性定义了项目的缩小比例，默认为1，即如果空间不足，该项目将缩小。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">.<span class="property">item</span> &#123;</span><br><span class="line">  flex-<span class="attr">shrink</span>: &lt;number&gt;; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动"></p><h3 id="align-self属性"><a href="#align-self属性" class="headerlink" title="align-self属性"></a><strong>align-self属性</strong></h3><p><code>align-self</code>属性允许单个项目有与其他项目不一样的对齐方式，可覆盖<code>align-items</code>属性。默认值为<code>auto</code>，表示继承父元素的<code>align-items</code>属性，如果没有父元素，则等同于<code>stretch</code>。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">.<span class="property">item</span> &#123;</span><br><span class="line">  align-<span class="attr">self</span>: auto | flex-start | flex-end | center | baseline | stretch;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动"></p><h1 id="JavaScript"><a href="#JavaScript" class="headerlink" title="JavaScript"></a>JavaScript</h1><p>​    Javascript 脚本代码必须位于 <script> 与 </script> 标签之间。</p><p>​    Javascript 脚本代码可被放置在 HTML 页面的 <body> 和 <head> 部分中。</p><h3 id="一-输出"><a href="#一-输出" class="headerlink" title="一:输出"></a>一:输出</h3><ul><li>使用 <strong>window.alert()</strong> 弹出警告框。</li><li>使用 <strong>document.write()</strong> 方法将内容写到 HTML 文档中。</li><li>使用 <strong>innerHTML</strong> 写入到 HTML 元素。</li><li>使用 <strong>console.log()</strong> 写入到浏览器的控制台。</li></ul><h3 id="二-数据类型"><a href="#二-数据类型" class="headerlink" title="二:数据类型"></a>二:数据类型</h3><p><strong>基本数据类型</strong>：字符串（String）、数字(Number)、布尔(Boolean)、空（Null）、未定义（Undefined）、Symbol。</p><p><strong>引用数据类型（对象类型）</strong>：对象(Object)、数组(Array)、函数(Function)</p><blockquote><p>JS中的变量都是保存到栈内存中的，</p><p>基本据类型的值直接在栈内存中存，</p><p>值与值之间是独立存在，修改一个变量不会影响其他的变量</p><p>对象是保存到堆内存中的，每创建一个新的对象，就会在堆内存中开辟出一个新的空间． 而变量保存的是对象的内存地址（对象的引用），如果两个变量保存的是同一个对象引用当一个通过一个变量修改属性时，另一个也会受到影响</p></blockquote><h3 id="三-函数"><a href="#三-函数" class="headerlink" title="三:函数"></a>三:函数</h3><p>语法:</p><blockquote><p>function <em>函数名</em>([形参1,形参2…形参N]){<br>   <em>语句</em><br> }</p><p> 函数名();    &#x2F;&#x2F;调用函数</p></blockquote><p>在调用函数时,可以在()中指定参数(实际参数) </p><blockquote><p>fnction sum(a,b){</p><p>​    console.log(a+b);</p><p>}</p><p>​    函数名(a,b);    &#x2F;&#x2F;调用函数</p></blockquote><p> 调用函数时,多余实参不会被赋值,如果实参的数量少于形参的数量,则没有对应实参的形参将是undefined</p><p><strong>结束函数</strong>:</p><p>使用break;可以退出当前的循环<br>使用continue;用于跳过当此循环<br>使用return;可以结束整个函数</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>月亮西沉有朝阳</title>
      <link href="/2022/12/11/moon/"/>
      <url>/2022/12/11/moon/</url>
      
        <content type="html"><![CDATA[<p>  进入大学的第一个学期，和我想象中的大学生活有着很大的出入。之前听上过大学的哥哥姐姐给我的描述，大学应该是充实而又丰富多彩的，有着各种各样的活动、认识各种各样的朋友、学习很多很多知识。虽然我也曾想过疫情会对这些有些影响，但无非就是没有办法出校门，万万没有想到我大学的第一个学期只在学校待了一个多月，线下课只上了三节，只在两个校区短暂互通时去过几次图书馆。疫情的影响还在继续，这个寒假很长，作为一个普普通通的社恐小透明，面对各具特色的同学们，我总想做点什么来提升一下自己，所以我决定加入一个学习小组。因为害怕面试时的紧张感和不确定的结果，一开始我想要加入一个不用面试的小组，但经过向学姐的询问和看完各个小组的招新宣讲，我了解到各个小组的学习内容和强度大有不同，在网络上简单了解了Java的相关知识，我最终交上了我们小组的报名表。</p><p>  很开心能够顺利的进入我们小组，第一周按照小组的学习计划进行学习，因为我的专业大一上学期并没有学习有关编程的课程，刚开始学习Java的这一周有些吃力，但多一些时间学也能够理解，接下来在备考的间隙我也会抽空继续学习小组的学习计划。</p><p>   “春华秋实，虽万里路遥，但我坚信追光的人终会万丈光芒”，相信我能够坚持下去，也相信我会越来越好</p>]]></content>
      
      
      
    </entry>
    
    
  
  
</search>
